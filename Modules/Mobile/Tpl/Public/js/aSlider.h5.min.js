!function(){function Common(){}function DataAccess(){}function HtmlTag(){}function OutInterface(){}function SliderControl(t){function e(){function t(t){var e=[];return e.push(Common.StringFormat('<li class="cm-slide-item" id="{0}" style="width:{1}px;height:{2}px;font-size:{2}px;display:none;"></li>',[t.Id,this.Width,this.Height])),e.join("")}function e(t){var e=[];return e.push(Common.StringFormat('<span class="cui-slide-nav-item" id="nav_{0}" style="display:none;"></span>',[t.Id])),e.join("")}var i=this,n=this.Width*(this.DataList.length+2),o=[];return o.push(Common.StringFormat('<div class="cm-slide cm-slide--full-img" id="{0}" style="height:{1}px;">',[this.Id,this.Height])),o.push(Common.StringFormat('<ul class="cm-slide-list js_scroller" id="ul_{0}" style="position: absolute;width:{1}px;">',[this.Id,n])),this.FirstItem.Id=Common.CreateGuid(),this.FirstItem.IsLoad=!1,o.push(t.call(this,this.FirstItem)),Common.ArrayForeach(this.DataList,function(e){o.push(t.call(i,e))}),this.LastItem.Id=Common.CreateGuid(),this.LastItem.IsLoad=!1,o.push(t.call(this,this.LastItem)),o.push("</ul>"),this.DataList.length>1&&this.Slider.IsNav&&(o.push(Common.StringFormat('<div class="cui-navContainer" id="nav_{0}" style="color: rgb(20, 145, 197);display:none;z-index:10;position: absolute;">',[this.Id])),Common.ArrayForeach(this.DataList,function(t){o.push(e.call(i,t))}),o.push("</div>")),o.push("</div>"),o.join("")}function i(){var t=this;if(HtmlTag.BindEvent(window,"resize",function(){d.call(t,!0)}),this.Slider.IsNav){var e=HtmlTag.GetElementsByTagName(HtmlTag.GetById("nav_"+this.Id),"span");Common.IsArray(e)&&Common.ArrayForeach(e,function(e){e.onclick=function(){var e=this.id.replace("nav_","");g.call(t,l.call(t,e))}})}var i=HtmlTag.GetElementsByTagName(HtmlTag.GetById(this.Id),"li");Common.IsArray(i)&&Common.ArrayForeach(i,function(e){e.onclick=function(){t.ItemClick(l.call(t,this.id))}});var o=function(e){n.call(t,e)},a=function(e){r.call(t,e)},m=function(e){s.call(t,e)},c=function(){t.Stop()},h=function(){t.Play()},u=HtmlTag.GetById(this.Id);HtmlTag.BindEvent(u,"touchstart",o),!this.IsHybrid&&HtmlTag.BindEvent(u,"touchend",m),HtmlTag.BindEvent(window,"touchend",a),HtmlTag.BindEvent(window,"touchcancel",a),HtmlTag.BindEvent(u,"mouseover",c),HtmlTag.BindEvent(u,"mouseout",h)}function n(t){this.Stop(),!this.IsHybrid&&t.preventDefault&&t.preventDefault(),this.IsTouchStart=!0,this.SelectTarget=t.target;var e=t.touches?t.touches[0]:t;this.StartX=e.pageX,this.StartY=e.pageY,a.call(this)}function o(t){if(this.IsTouchStart&&this.SelectTarget.parentNode.id==t.target.parentNode.id){t.preventDefault&&t.preventDefault(),this.IsTouchMove=!0;var e=t.touches?t.touches[0]:t,i=e.pageX-this.StartX,n=e.pageY-this.StartY;if(this.IsHybrid&&e.pageY+5>=this.Height)r.call(this,t);else if(this.IsHybrid&&e.pageY-5<=0)r.call(this,t);else if(Math.abs(i)>Math.abs(n)){var o=this.SelectData.Left+i;u.call(this,o)}}}function a(t){var e=this,i=function(t){o.call(e,t)},n=HtmlTag.GetById(this.Id);t?HtmlTag.RemoveEvent(n,"touchmove",i):HtmlTag.BindEvent(n,"touchmove",i)}function r(t){if(this.IsTouchMove&&this.IsTouchStart){var e=t.changedTouches?t.changedTouches[0]:t,i=e.pageX-this.StartX;i>40?c.call(this,200):-40>=i?h.call(this,200):u.call(this,this.SelectData.Left,50)}this.IsTouchStart&&(a.call(this,!0),this.IsTouchClicked?this.ItemClick(this.SelectData):this.Play()),this.IsTouchStart=!1,this.IsTouchMove=!1,this.IsTouchClicked=!1}function s(t){this.IsTouchStart&&!this.IsTouchMove&&this.SelectTarget.parentNode.id==t.target.parentNode.id&&(this.IsTouchClicked=!0)}function l(t){var e=null;return Common.ArrayForeach(this.DataList,function(i){return i.Id==t?(e=i,!1):void 0}),e}function d(t){var e=this,i=0,n=0;Common.ArrayForeach(this.DataList,function(t){return t.Width>0&&t.Height>0?(i=t.Width,n=t.Height,!1):void 0});var o=OutInterface.GetAdWidthHeight();if(null!=o)this.Width=o.Width,this.Height=o.Height,i>0&&n>0&&(this.ImgHeight=parseFloat(n*this.Width/i)),m.call(this,i,n,!0),HtmlTag.SetHeight(this.TagObject,this.Height);else if(i>0&&n>0&&(this.Width=HtmlTag.GetBodyWidth(),m.call(this,i,n),HtmlTag.SetHeight(this.TagObject,this.Height),t)){var a=null;a=HtmlTag.GetById(this.Id),HtmlTag.SetHeight(a,this.Height),a=HtmlTag.GetById("ul_"+this.Id),HtmlTag.SetWidth(a,this.Width*(this.DataList.length+2)),Common.ArrayForeach(this.DataList,function(t){a=HtmlTag.GetById(t.Id),HtmlTag.SetWidth(a,e.Width),HtmlTag.SetHeight(a,e.Height),HtmlTag.SetStyleValue(a,"fontSize",e.Height+"px")}),a=HtmlTag.GetById(this.FirstItem.Id),HtmlTag.SetWidth(a,this.Width),HtmlTag.SetHeight(a,this.Height),a=HtmlTag.GetById(this.LastItem.Id),HtmlTag.SetWidth(a,this.Width),HtmlTag.SetHeight(a,this.Height),I.call(this),g.call(this)}}function m(t,e,i){i||(this.Height=parseInt(e*this.Width/t)),Common.StringIsNullOrEmpty(this.Slider.Theme)||"hotel"==this.Slider.Theme.toLowerCase()&&(this.ImgHeight>0?this.Height=2*this.ImgHeight:this.Height=2*this.Height)}function c(t){function e(){this.FirstItem.IsLoad&&u.call(this,0,200)}for(var i,n=this,o=null,a=this.DataList.length-1;a>=0;a--)if(i=this.DataList[a],i.IsShow&&null!=n.SelectData&&i.Index2<n.SelectData.Index2){o=i;break}var r=!1;if(null==o)for(var a=this.DataList.length-1;a>=0;a--)if(i=this.DataList[a],i.IsShow){o=i,t=0,r=!0,e.call(this);break}null!=o&&(r?window.setTimeout(function(){g.call(n,o,t)},200):g.call(this,o,t))}function h(t){function e(){if(this.LastItem.IsLoad){var t=Common.ArrayWhereToList(this.DataList,function(t){return t.IsLoad}),e=t.length;this.FirstItem.IsLoad&&e++;var i=0-e*this.Width;u.call(this,i,200)}}var i=this,n=null;Common.ArrayForeach(this.DataList,function(t){return t.IsLoad&&null!=i.SelectData&&t.Index2>i.SelectData.Index2?(n=t,!1):void 0});var o=!1;null==n&&Common.ArrayForeach(this.DataList,function(a){return a.IsLoad?(n=a,t=0,o=!0,e.call(i),!1):void 0}),null!=n&&(o?window.setTimeout(function(){g.call(i,n,t)},200):g.call(this,n,t))}function u(t,e){function i(t,e,i){if(null!=t&&void 0!=t.style){t.style[e]=i;for(var n=e.charAt(0).toUpperCase()+e.substr(1),o=["webkit","Moz","ms","O"],a=0;a<o.length;a++)e=o[a]+n,e in t.style&&(t.style[e]=i)}}var n=HtmlTag.GetById("ul_"+this.Id);e=void 0==e?"0ms":e+"ms",i(n,"transform",Common.StringFormat("translate({0}px,0px) translateZ(0)",[t])),i(n,"transitionTimingFunction","cubic-bezier(0.1, 0.57, 0.1, 1)"),i(n,"transitionDuration",e)}function g(t,e){function i(t){var i=Common.ArrayWhereToList(this.DataList,function(e){return e.IsLoad&&e.Index2<t.Index2}),o=i.length;this.FirstItem.IsLoad&&o++;var a=0-o*this.Width;this.SelectData.Left=a,u.call(this,a,e),this.IsSlider&&this.Slider.IsNav&&n(this.SelectData.Id)}function n(t){var e=HtmlTag.GetById("nav_"+t),i=HtmlTag.GetElementsByTagName(e.parentNode,"span");Common.IsArray(i)&&Common.ArrayForeach(i,function(t){HtmlTag.RemoveClass(t,"cui-slide-nav-item-current")}),HtmlTag.AddClass(e,"cui-slide-nav-item-current")}if(void 0!=t&&(this.SelectData=t),null!=this.SelectData){i.call(this,this.SelectData),this.ItemChange(t);var o=this;window.setTimeout(function(){o.Play()},200)}}function I(){var t=f.call(this),e=parseInt((this.Width-20*t)/2),i=HtmlTag.GetById("nav_"+this.Id);HtmlTag.SetStyle(i,{left:e+"px",bottom:"10px"});var n=!1;this.IsSlider||(n=t>1),n&&(this.IsSlider=!0,this.Play(),this.Slider.IsNav&&HtmlTag.SetShow(i))}function f(){var t=Common.ArrayWhereToList(this.DataList,function(t){return t.IsLoad});return t.length}function S(){var t=this;this.AdLoadErrorCount=0,Common.ArrayForeach(this.DataList,function(e,i){i-1>=0&&(e.BeforeImage=t.DataList[i-1]),i+1<t.DataList.length&&(e.AfterImage=t.DataList[i+1])}),Common.ArrayForeach(this.DataList,function(e,i){t.LoadImage(e)})}this.Slider=t,this.Id=Common.CreateGuid(),this.DataList=[],this.ItemChange=function(t){},this.ItemClick=function(t){},this.Width=0,this.Height=0,this.IsSlider=!1,this.TagObject=null,this.FirstItem={},this.LastItem={},this.SelectData=null,this.Load=function(t){this.IsHybrid=OutInterface.IsHybrid(),t.length>0?(this.DataList=t,Common.ArrayForeach(this.DataList,function(t,e){t.Id=Common.CreateGuid(),t.IsLoad=!1,t.IsShow=!1,t.Index2=e}),this.TagObject=HtmlTag.GetById(this.Slider.TagId),d.call(this),HtmlTag.SetHtml(this.TagObject,e.call(this)),S.call(this),i.call(this)):!this.Slider.IsBackupLoadComplete&&this.Slider.AdLoadComplete(this,1)},this.ReLoad=function(){this.Destroy(),this.IsSlider=!1,this.Load(this.DataList)},this.Play=function(){var t=this;this.Stop(),this.IsSlider&&(this.TimeoutId=window.setInterval(function(){h.call(t,500)},3e3))},this.Stop=function(){null!=this.TimeoutId&&(window.clearInterval(this.TimeoutId),this.TimeoutId=null)},this.LoadImage=function(e){function i(t){var e=!0;t.BeforeImage&&(t.BeforeImage.IsRequest?t.BeforeImage.IsLoad&&!t.BeforeImage.IsShow&&(e=!1):e=!1),e&&t.IsLoad&&(t.IsShow=!0,I.call(s),o.call(s),s.Slider.IsLoadComplete?g.call(s):(!Common.StringIsNullOrEmpty(s.Slider.BackupImageId)&&HtmlTag.RemoveElement(s.Slider.BackupImageId),s.Slider.IsLoadComplete=!0,g.call(s,t),HtmlTag.SetShow(s.TagObject),!s.Slider.IsBackupLoadComplete&&s.Slider.AdLoadComplete(s.Slider,0)),HtmlTag.SetShow(t.TagObject),HtmlTag.SetShow(HtmlTag.GetById("nav_"+t.Id))),e&&t.AfterImage&&t.AfterImage.IsRequest&&i(t.AfterImage)}function n(){e.IsLoad=!1,e.IsRequest=!0,i(e),this.AdLoadErrorCount+=1,this.DataList.length==this.AdLoadErrorCount&&!this.Slider.IsBackupLoadComplete&&this.Slider.AdLoadComplete(t,1)}function o(){var t=Common.ArrayWhereToList(this.DataList,function(t){return t.IsLoad});if(t.length>1){var e=null;e=t[t.length-1];var i=HtmlTag.GetById(this.FirstItem.Id);HtmlTag.SetHtml(i,a.call(this,e)),HtmlTag.SetShow(i),e=t[0],i=HtmlTag.GetById(this.LastItem.Id),HtmlTag.SetHtml(i,a.call(this,e)),HtmlTag.SetShow(i),this.FirstItem.IsLoad||(this.FirstItem.IsLoad=!0,this.LastItem.IsLoad=!0,g.call(this))}}function a(t){var e=[];return this.ImgHeight-this.Height>1?e.push(Common.StringFormat('<img src="{0}" style="width:{1}px;height:{2}px;position:absolute;bottom:0px; overflow:hidden;"/>',[t.SrcUrl,this.Width,this.ImgHeight])):e.push(Common.StringFormat('<img src="{0}"/>',[t.SrcUrl])),t.IsDy&&!Common.StringIsNullOrEmpty(t.Content)&&e.push(t.Content),e.join("")}function r(t){var i=[];i.push(Common.StringFormat('<img src="{0}" style="width:{1}px;height:{2}px;position:absolute;bottom:0px; overflow:hidden;"/>',[e.SrcUrl,this.Width,this.ImgHeight])),HtmlTag.AppendHtml(t,i.join(""))}var s=this;if(Common.StringIsNullOrEmpty(e.SrcUrl))e.IsRequest||(e.LoadImgEndT=(new Date).getTime()),e.IsRequest=!0,s.Slider.SetLoadTiming(),n.call(s);else{var l=new Image;l.src=e.SrcUrl,e.IsRequest||(e.LoadImgStartT=(new Date).getTime()),l.onload=function(){e.IsLoad=!0,e.IsRequest||(e.LoadImgEndT=(new Date).getTime()),e.IsRequest=!0;var t=HtmlTag.GetById(e.Id);s.ImgHeight-s.Height>1?r.call(s,t):t.appendChild(this),e.IsDy&&!Common.StringIsNullOrEmpty(e.Style)&&null==HtmlTag.GetById("dyadStyle")&&Common.LoadCss("dyadStyle",e.Style),e.IsDy&&!Common.StringIsNullOrEmpty(e.Content)&&HtmlTag.AppendHtml(t,e.Content),e.TagObject=t,i(e),s.Slider.SetLoadTiming()},l.onerror=function(){e.IsRequest||(e.LoadImgEndT=(new Date).getTime()),e.IsRequest=!0,s.Slider.SetLoadTiming(),n.call(s)}}},this.Destroy=function(){var t=this;this.Stop(),HtmlTag.SetHtml(this.TagObject,""),HtmlTag.RemoveEvent(window,"resize",function(){d.call(t,!0)})}}function AdDataAccess(t){function e(){if(this.AdEndTime>0&&this.DyAdEndTime>0){var t=Common.GetStorage("SiteID"+this.Slider.CacheKey),e=Common.GetStorage("SiteType"+this.Slider.CacheKey);OutInterface.TrackMetric(this.Slider.StartTime,this.Slider.PageId,1,0,t,e)}}function i(){var t={},e=OutInterface.GetCINFO();return Common.IsEmptyObject(e)?(t.ScreenWidth=HtmlTag.GetScreenWidth(),t.ScreenHeight=HtmlTag.GetScreenHeight()):(t.ScreenWidth=e.screenWidth,t.ScreenHeight=e.screenHeight,t.ScreenPxDensity=e.screenPxDensity,t.DeviceOSVersion=e.serverVersion),t}function n(){var t={};return t.BizType=this.Slider.BizType,t.PageCode=this.Slider.PageCode,t}this.Slider=t,this.GetMonitoring=function(t,e,i){function n(){i.call(t)}if(e&&!(e.length<=0)){var o=(OutInterface.GetHead(),{});o.ADPositions=e,o.PageID=t.PageId;var a=OutInterface.GetRootUrl()+"GetMonitoring";DataAccess.PostRequest(a,o,function(t){n()},function(){n()})}},this.GetAdDataList=function(t,o){function a(i,n,a){if(Common.SetStorage("SiteType"+a,""),Common.SetStorage("SiteID"+a,""),Common.SetStorage("BidAdCount"+a,0),Common.SetStorage("DyAdIndex"+a,0),i&&i.Extensions&&i.Extensions.length>0)for(var s=0;s<i.Extensions.length;s++){var l=i.Extensions[s];"AdSite"===l.Name?(Common.SetStorage("SiteType"+a,l.Key),Common.SetStorage("SiteID"+a,l.Value)):"BidAdCount"===l.Name?Common.SetStorage("BidAdCount"+a,l.Value):"DyAdIndex"===l.Name&&Common.SetStorage("DyAdIndex"+a,l.Value)}var d=Common.GetStorage("SiteID"+r.Slider.CacheKey),c=Common.GetStorage("SiteType"+r.Slider.CacheKey);OutInterface.TrackMetric(m,r.Slider.PageId,2,n,d,c),null!=i&&void 0!=i.Ads&&i.Ads.length>0?o.call(t,i.Ads):!r.Slider.IsBackupLoadComplete&&r.Slider.AdLoadComplete(r.Slider,1),r.AdEndTime=(new Date).getTime(),e.call(r)}var r=this,s=OutInterface.GetHead(),l={};l.DeviceInfo=i(),l.SystemCode=parseFloat(s.syscode),l.ChannelID=s.sid,l.SiteID=this.Slider.SiteID,l.GlobalBusinessInfoList=[n.call(this)],l.head=s;var d=Common.GetStorage("SelectCityId");if(parseFloat(d)>0?l.AdLocation={CityID:d}:l.AdLocation={CityID:1},!Common.StringIsNullOrEmpty(l.SystemCode)){var m=(new Date).getTime();this.AdEndTime=0;var c=OutInterface.GetRootUrl()+"GetGlobalADListV4";DataAccess.PostRequest(c,l,function(t){a(t,0,r.Slider.CacheKey)},function(){a(null,0,r.Slider.CacheKey)})}},this.GetDyAdData=function(t,n,o){function a(i,n){var a=Common.GetStorage("SiteID"+r.Slider.CacheKey),s=Common.GetStorage("SiteType"+r.Slider.CacheKey);OutInterface.TrackMetric(c,r.Slider.PageId,3,n,a,s),o.call(t,i),r.DyAdEndTime=(new Date).getTime(),e.call(r)}var r=this,s=OutInterface.GetHead(),l=i(),d={},m=Common.GetStorage("SelectCityId");if(parseFloat(m)>0?d.LocationType={CityID:m}:d.LocationType={CityID:1},d.ScreenWidth=l.ScreenWidth,d.ScreenHeight=l.ScreenHeight,d.BusinessInfo={BusinessType:this.Slider.BizType,PageCode:this.Slider.PageCode},d.VID=OutInterface.IsHybrid()?OutInterface.GetClientId():OutInterface.GetVId(),d.head=s,!Common.StringIsNullOrEmpty(s.syscode)){var c=(new Date).getTime();this.DyAdEndTime=0;var h=OutInterface.GetRootUrl()+"GetDynamicAd";DataAccess.PostRequest(h,d,function(t){a(t,0)},function(){a(null,0)})}}}function AdBusiness(t){function e(){var t="AdDataList_"+this.Slider.CacheKey,e=Common.JsonToObject(Common.GetStorage(t));Common.IsEmptyObject(e)||(this.AdDataList=Common.Clone(e))}function i(t){var e="";t||(e="AdDataList_"+this.Slider.CacheKey,Common.SetStorage(e,Common.JsonToString(this.AdDataList),1))}function n(t,e,i){if(-1!=i){var n=Common.GetStorage("SiteID"+this.Slider.CacheKey),o=Common.GetStorage("SiteType"+this.Slider.CacheKey);OutInterface.TrackMetric(e,this.Slider.PageId,4,i,n,o)}this.Slider.DyStartT=(new Date).getTime(),this.DataAccess.GetDyAdData(this,t,function(t){this.Slider.DyEndT=(new Date).getTime(),a.call(this,t)})}function o(){var t=this;t.Slider.IsLoadAdComplate=!0;var e=[];t.Slider.AdDataList=[],this.AdDataList.length>0&&(e=this.AdDataList[0].ADContentList,e=e.sort(function(t,e){return t.Index>e.Index?1:-1}));var i=[];Common.ArrayForeach(e,function(e,n){e.AdvertisementPosition=e.PlaceID,e.AID=e.ADID,e.IsVisible=!1,t.Slider.IsHybrid||(e.SrcUrl=Common.ReplaceHttp(e.SrcUrl)),OutInterface.JudgeAndroid612Ctrip&&OutInterface.JudgeAndroid612Ctrip(e.LinkUrl)||!(e.Adtype<100)?t.Slider.AdDataList.push(e):i.push(e)}),null==this.DyAdData||OutInterface.JudgeAndroid612Ctrip&&OutInterface.JudgeAndroid612Ctrip(this.DyAdData.LinkUrl)||(this.DyAdData.IsVisible=!1,this.Slider.AddDyAdData(i,this.DyAdData)),this.Slider.BandData(i)}function a(t){if(this.Slider.IsLoadDyAdComplate=!0,!t)return void this.Slider.DyAdBandData(null);var e={};e.Style=t.Style,e.AdvertisementPosition=t.PlaceID,e.PlaceID=t.PlaceID>0?t.PlaceID-0:0,e.Content=t.Content,e.AID=t.AID,e.ADID=t.AID>0?t.AID-0:0,e.Adtype=0,e.SrcUrl=t.Src,e.LinkUrl=t.Link,e.IsDy=!0,e.Index=t.Index,this.Slider.IsHybrid||(e.SrcUrl=Common.ReplaceHttp(e.SrcUrl)),t.Extension&&t.Extension.length>0&&Common.ArrayForeach(t.Extension,function(t){e[t.Name]=t.Value}),this.DyAdData=e,i.call(this,!0),OutInterface.JudgeAndroid612Ctrip&&OutInterface.JudgeAndroid612Ctrip(e.LinkUrl)||this.Slider.DyAdBandData(this.DyAdData)}function r(){var t=this;if(HtmlTag.SetHtml(this.TagObject,""),this.Slider.IsNoAdHide&&HtmlTag.SetHide(this.TagObject),!Common.StringIsNullOrEmpty(this.Slider.BackupImageUrl)&&!this.Slider.IsLoadComplete){this.Slider.BackupImageId=Common.CreateGuid(),this.Slider.IsHybrid||(this.Slider.BackupImageUrl=Common.ReplaceHttp(this.Slider.BackupImageUrl));var e=new Image;e.src=this.Slider.BackupImageUrl,e.onload=function(){if(!t.Slider.IsLoadComplete){var e=Common.StringFormat('<img src="{0}" id="{1}" style="width:100%;"/>',[t.Slider.BackupImageUrl,t.Slider.BackupImageId]);HtmlTag.AppendHtml(t.TagObject,e),HtmlTag.SetShow(t.TagObject),t.Slider.IsBackupLoadComplete=!0,t.Slider.AdLoadComplete(t.Slider,0)}}}}this.Slider=t,this.TagObject=Object(),this.AdDataList=Array(),this.DyAdData=null,this.DataAccess=null,this.Init=function(){this.DataAccess=new AdDataAccess(this.Slider),this.TagObject=HtmlTag.GetById(this.Slider.TagId),e.call(this),r.call(this),null==this.DyAdData&&OutInterface.GetCity(n,this),this.Slider.V4StartT=(new Date).getTime(),0==this.AdDataList.length?this.DataAccess.GetAdDataList(this,function(t){this.Slider.V4EndT=(new Date).getTime(),this.AdDataList=t,i.call(this,!1),o.call(this)}):(this.Slider.V4EndT=this.Slider.V4StartT,o.call(this))},this.GetMonitoring=function(t,e){this.DataAccess.GetMonitoring(this.Slider,t,e)}}function AdSlider(){this.BizType=Number(),this.PageCode=Number(),this.TagId=String(),this.BackupImageUrl=String(),this.IsNoAdHide=!1,this.IsNav=!0,this.ExpandSetTrackLog=function(t,e){},this.AdLoadComplete=function(t,e){},this.IsLoadComplete=!1,this.IsBackupLoadComplete=!1,this.hpageid="",this.pageid="",this.Theme="",this.PageId="",this.SiteID="",this.SliderControl=null,this.SetAdSumPv=Function(),this.SetLoadTiming=function(){if(this.IsLoadAdComplate&&this.IsLoadDyAdComplate){for(var t=this.V4EndT-this.V4StartT,e=this.DyEndT-this.DyStartT,i=[],n=!0,o=0;o<this.SliderControl.DataList.length;o++){var a=this.SliderControl.DataList[o];if(n=n&&a.IsRequest,!a.IsRequest)return;var r={PlaceID:a.PlaceID,AdID:a.ADID,AdType:a.Adtype,ImgLoadTime:a.LoadImgEndT-a.LoadImgStartT};i.push(r)}if(n){this.IsLoadAdComplate=!1,this.IsLoadDyAdComplate=!1;var s=[],l={AdList:i,SvrLoadTime:t,DySvrLoadTime:e};s.push(l),this.AdBusiness.GetMonitoring(s,function(){})}}},this.Load=function(t){function e(){Common.StringIsNullOrEmpty(this.Theme)&&this.IsHybrid&&3==parseInt(this.BizType)&&(this.Theme="hotel"),Common.StringIsNullOrEmpty(this.Theme)||"hotel"==this.Theme.toLowerCase()&&(HtmlTag.AddClass(HtmlTag.GetById(this.TagId),"hotel"),n=this.IsHybrid?"../advertisement/css/hotel-theme.css":"//webresource.c-ctrip.com/ResMarketOnline/R2/css/aFrame/hotel-theme.css",Common.LoadLink(n))}try{if(this.IsHybrid=OutInterface.IsHybrid(),!Common.IsObject(t))return;for(var i in t)this[i]=t[i];if(Common.StringIsNullOrEmpty(this.TagId))return;Common.StringIsNullOrEmpty(this.PageId)&&(this.PageId=this.IsHybrid?this.hpageid:this.pageid),this.StartTime=(new Date).getTime(),this.CacheKey=this.BizType+"_"+this.PageCode+"_"+this.SiteID;var n="";n=this.IsHybrid?"../advertisement/css/abase.css":"//webresource.c-ctrip.com/ResMarketOnline/R2/css/aFrame/abase.css",Common.LoadLink(n),e.call(this),this.AdBusiness=new AdBusiness(this),this.AdBusiness.Init()}catch(o){}return this},this.BandData=function(t){function e(t,e){if(i.call(this,t,e),this.ExpandSetTrackLog(t,e),3==t)if(this.IsHybrid){var n=this;window.setTimeout(function(){n.SliderControl.Play(),OutInterface.JumpUrl(e.LinkUrl)},200)}else this.SliderControl.ReLoad(),window.setTimeout(function(){OutInterface.JumpUrl(e.LinkUrl)},200)}function i(t,e){var i=this.IsHybrid?OutInterface.GetClientId():OutInterface.GetVId();if(!Common.StringIsNullOrEmpty(this.PageId)){var n;if(this.IsHybrid?(n={UserId:i,PageId:this.PageId,cver:OutInterface.GetAppVersion()},1==t?(n.PositionIdVSAdId=e.AdvertisementPosition,e.IsDy&&(n.PositionIdVSAdId+=":"+e.AID)):(n.PositionId=e.AdvertisementPosition,n.AdId=e.AID,n.src=e.SrcUrl)):(n="UserId="+i+"&PageId="+this.PageId,1==t?(n+="&PositionIdVSAdId="+e.AdvertisementPosition,e.IsDy&&(n+=":"+e.AID)):n+="&PositionId="+e.AdvertisementPosition+"&AdId="+e.AID+"&src="+e.SrcUrl),e.IsDy){var o=Common.StringIsNullOrEmpty(e.MKTID)?"":e.MKTID;if(this.IsHybrid){if(n.uid=o,n.vid=i,!Common.StringIsNullOrEmpty(e.BITraceLog)){var a=Common.GetPageQueryString(e.BITraceLog);for(var r in a)n[r]=a[r]}}else n+="&uid="+o,n+="&vid="+i,Common.StringIsNullOrEmpty(e.BITraceLog)||(n+="&"+e.BITraceLog)}var s=Common.GetStorage("SiteType"+this.CacheKey)||"",l=Common.GetStorage("SiteID"+this.CacheKey)||"";"object"==typeof n?(n.SiteType=s,n.SiteID=l):"string"==typeof n&&(n+="&SiteType="+s,n+="&SiteID="+l),OutInterface.SetUBTTrackLog(t,n),this.IsHybrid&&0==parseInt(this.BizType)&&3==t&&OutInterface.SetUBTActionLog("c_advertise")}}function n(t){var e=[];return Common.ArrayForeach(t,function(t){!t.IsDy&&t.AdvertisementPosition&&t.AID&&t.Adtype<100&&e.push(t.AdvertisementPosition+":"+t.AID)}),e.length>0?{AdvertisementPosition:e.join("-")}:null}function o(t){var e=[];return Common.ArrayForeach(t,function(t){!t.IsDy&&t.AdvertisementPosition&&t.AID&&t.Adtype>=100&&e.push(t.AdvertisementPosition+":"+t.AID)}),e.length>0?{AdvertisementPosition:e.join("-")}:null}function a(t){var e=null;return Common.ArrayForeach(t,function(t){return t.IsDy&&t.AdvertisementPosition&&t.AID?(e=t,!1):void 0}),e}function r(t){Common.ArrayForeach(t,function(t){if(!Common.StringIsNullOrEmpty(t.ThirdLoadTrackUrl)){var e=new Image;e.src=Common.AddUrlRandom(t.ThirdLoadTrackUrl)}})}var s=this;this.SliderControl=new SliderControl(this),this.SliderControl.ItemChange=function(t){void 0==t||t.IsVisible||(t.IsVisible=!0,e.call(s,2,t))},this.SliderControl.ItemClick=function(t){t&&e.call(s,3,t)},this.SetAdSumPv=function(t){t&&e.call(this,1,t)},this.SetAdSumPv(n(t)),this.SetAdSumPv(o(t)),r(t),this.SetAdSumPv(a(t)),this.SliderControl.Load(t)},this.DyAdBandData=function(t){if(null!=this.SliderControl&&this.SliderControl.DataList.length>0){var e=this.AddDyAdData(this.SliderControl.DataList,t);e?(t&&t.AID>0&&this.SetAdSumPv(t),this.SliderControl.ReLoad()):this.SliderControl.Slider.SetLoadTiming()}},this.AddDyAdData=function(t,e){var i=0,n=null,o=Common.GetStorage("DyAdIndex"+this.CacheKey),a=Common.GetStorage("BidAdCount"+this.CacheKey),r=o;r>0&&e&&e.AID>0&&(n=e);var s=a-(0>=r||null==e||!(e.AID>0)?0:1)-t.length;if(s>=0&&r>0&&e&&e.AID>0){for(var l=!1,i=0;i<t.length;i++)if(r<=t[i].Index){t.splice(i,0,e),l=!0;break}l||t.push(e)}if(s>0&&this.AdDataList&&this.AdDataList.length>0){for(var d=[],m=0;s>m&&m<this.AdDataList.length;m++)for(var c=0;a>c;c++){if((!n||n.Index>this.AdDataList[m].Index)&&(n=this.AdDataList[m]),!t[c]){t.push(this.AdDataList[m]),d.push(this.AdDataList[m].AdvertisementPosition+":"+this.AdDataList[m].AID);break}if(t[c].Index>c+1){t.splice(c,0,this.AdDataList[m]),d.push(this.AdDataList[m].AdvertisementPosition+":"+this.AdDataList[m].AID);break}}this.SetAdSumPv(d.length>0?{AdvertisementPosition:d.join("-")}:null)}return n},this.destroy=function(){this.SliderControl.Destroy(),this.SliderControl=null}}Common.IsArray=function(t){return"object"==typeof t&&t.length>=0},Common.IsFunction=function(t){return"function"==typeof t},Common.IsObject=function(t){return null==t||void 0==t?!1:"object"==typeof t&&"[object object]"==Object.prototype.toString.call(t).toLowerCase()&&!t.length},Common.IsEmptyObject=function(t){if(null===t||void 0===t)return!0;if("object"==typeof t&&t.length>0)return!1;if("object"==typeof t){var e=!1;for(var i in t){e=!0;break}return!e}return!1},Common.StringTrim=function(t){return void 0===t||null===t?"":t.replace(/(^\s*)|(\s*$)/g,"").replace(/(^　*)|(　*$)/g,"")},Common.StringFormat=function(t,e){if(Common.StringIsNullOrEmpty(t))return"";if(Common.IsArray(e))for(var i=0;i<e.length;i++)e[i]=Common.StringIsNullOrEmpty(e[i])?"":e[i].toString(),t=t.replace(new RegExp("\\{"+i.toString()+"\\}","g"),e[i]);return t},Common.StringIsNullOrEmpty=function(t){return null===t||void 0===t||""==Common.StringTrim(t.toString())},Common.CreateGuid=function(){function t(){return(65536*(1+Math.random())|0).toString(16).substring(4)}function e(){for(var e="",i=1;20>=i;i++)e+=t(),(8===i||12===i||16===i||20===i)&&(e+="-");var n=parseInt(8*Math.random()),o=(new Date).getTime()+"";e+=o.slice(0,n);for(var a=0;4>a;a++)e+=t();return e+=o.slice(n+5,13)}return e()},Common.JsonToObject=function(jsonString){if(Common.StringIsNullOrEmpty(jsonString)||"string"!=typeof jsonString)return null;jsonString=Common.StringTrim(jsonString);try{return eval("("+jsonString+")")}catch(ex){}return null},Common.JsonToString=function(t){function e(t,i){var n="";if(null==i)n="null";else if("number"==typeof i)n=i.toString();else if("boolean"==typeof i)n=i.toString().toLowerCase();else if(Common.IsArray(i)){for(var o=[],a=0;a<i.length;a++)o.push(e("",i[a]));n="["+o.join(",")+"]"}else if(Common.IsObject(i)){var o=[];for(var r in i)Common.IsFunction(i[r])||o.push(e(r,i[r]));n="{"+o.join(",")+"}"}else n='"'+i.toString().replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"';return Common.StringIsNullOrEmpty(t)?n:Common.StringFormat('"{0}":{1}',[t,n])}return null===t||void 0===t||Common.IsFunction(t)?"":e("",t)},Common.Clone=function(t){if(Common.IsEmptyObject(t))return t;if(Common.IsArray(t)){for(var e=[],i=0;i<t.length;i++)e.push(Common.Clone(t[i]));return e}if(Common.IsObject(t)){var n={};for(var o in t)Common.IsArray(t[o])||Common.IsObject(t[o])?n[o]=Common.Clone(t[o]):n[o]=t[o];return n}return t},Common.GetCookie=function(t){var e=null;if(document.cookie&&""!=document.cookie)for(var i=document.cookie.split(";"),n=0;n<i.length;n++){var o=Common.StringTrim(i[n]);if(o.substring(0,t.length+1)==t+"="){e=decodeURIComponent(o.substring(t.length+1));break}}return e},Common.ArrayWhereToList=function(t,e){for(var i=[],n=0;n<t.length;n++)e(t[n],n)&&i.push(t[n]);return i},Common.ArrayForeach=function(t,e){for(var i=0;i<t.length&&e(t[i],i)!==!1;i++);},Common.SetStorage=function(t,e,i){try{if(i=i||0,localStorage.setItem(t,e),i>0){t+="_Time";var n=((new Date).getTime()+60*i*1e3).toString()+"_"+i.toString();localStorage.setItem(t,n)}}catch(o){}},Common.GetStorage=function(t){var e="";try{e=localStorage.getItem(t);var i=t+"_Time",n=localStorage.getItem(i);if(!Common.StringIsNullOrEmpty(n)){var o=n.split("_"),a=parseFloat(o[0]),r=parseFloat(o[1]);if(a>0){var s=(new Date).getTime();s>a?(e="",localStorage.removeItem(t),localStorage.removeItem(i)):(a=((new Date).getTime()+60*r*1e3).toString()+"_"+r.toString(),localStorage.setItem(i,a))}}}catch(l){}return Common.StringIsNullOrEmpty(e)?"":e},Common.LoadCss=function(t,e){var i=document.createElement("style");i.type="text/css",i.id=t,"undefined"!=typeof i.styleSheet?i.styleSheet.cssText=e:i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i)},Common.LoadLink=function(t){var e=document.createElement("link");e.type="text/css",e.rel="stylesheet",e.href=t,document.getElementsByTagName("head")[0].appendChild(e)},Common.GetPageQueryString=function(t){var e={};t=t||location.search.substring(1);for(var i=t.split("&"),n=0;n<i.length;n++){var o=i[n].indexOf("=");if(-1!=o){var a=i[n].substring(0,o),r=i[n].substring(o+1);e[a]=unescape(r)}}return e},Common.ReplaceHttp=function(t){if(Common.StringIsNullOrEmpty(t))return t;var e=t.toLowerCase(),i=e.indexOf("https:");return 0==i?t.substring(6):(i=e.indexOf("http:"),0==i?t.substring(5):t)},Common.AddUrlRandom=function(t){return Common.StringIsNullOrEmpty(t)?void 0:(t+=t.indexOf("?")>0?"&":"?",t+=Common.StringFormat("_r{0}={1}",[Common.GetRandomChars(),Math.random()]))},Common.GetRandomChars=function(t){t=t||10;for(var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz",i=[],n=0;t>n;n++)i.push(e.charAt(Math.floor(Math.random()*e.length)));return i.join("")},DataAccess.Request=function(t){function e(){try{if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}return null}function i(t){return t+=t.indexOf("?")>0?"&_rm="+Math.random():"?_rm="+Math.random(),encodeURI(t)}if(!Common.IsEmptyObject(t)&&(t.Method=void 0==t.Method?"GET":t.Method,!Common.StringIsNullOrEmpty(t.Url))){t.Async=void 0==t.Async?!0:t.Async,t.Headers=void 0==t.Headers?{}:t.Headers,t.DataType=void 0==t.DataType?"json":t.DataType,t.ContentType=void 0==t.ContentType?"application/x-www-form-urlencoded":t.ContentType,t.Data=void 0==t.Data?"":t.Data;var n=null;if(n=e(),null!=n){n.open(t.Method,i(t.Url),t.Async,t.User,t.Password),n.setRequestHeader("Accept",t.DataType),n.setRequestHeader("Content-Type",t.ContentType);for(var o in t.Headers)n.setRequestHeader(o,t.Headers[o]);return n.onreadystatechange=function(){if(4==n.readyState)if(200==n.status){if(void 0!=t.SuccessCallback&&"function"==typeof t.SuccessCallback){var e;e="json"==t.DataType?Common.JsonToObject(n.responseText):"xml"==t.DataType?n.responseXML:n.responseText,t.SuccessCallback(e,n)}}else void 0!=t.ErrorCallback&&"function"==typeof t.ErrorCallback?t.ErrorCallback(n):Common.StringIsNullOrEmpty(n.responseText)?alert(n.status+":"+n.statusText):alert(n.responseText)},n.send(t.Data),n}}},DataAccess.PostRequest=function(t,e,i,n,o){var a={};a.Url=t,a.Method="POST",a.Async=o,a.ContentType="application/json; charset=utf-8",a.Data=Common.JsonToString(e),a.SuccessCallback=function(t,e){a.IsCallback=!0,i&&i(t,e)},a.ErrorCallback=function(t){a.IsCallback=!0,n&&n(t)};var r=DataAccess.Request(a);return window.setTimeout(function(){a.IsCallback||(a.IsCallback=!1,r.abort(),r.XmlHttp2=DataAccess.Request(a))},3e3),r},HtmlTag.GetById=function(t){return document.getElementById(t)},HtmlTag.SetHtml=function(t,e){null!=t&&void 0!==e&&(t.innerHTML=e)},HtmlTag.AppendHtml=function(t,e){var i=document.createElement("div");for(HtmlTag.SetHtml(i,e);i.childNodes.length>0;)t.appendChild(i.childNodes[0])},HtmlTag.GetElementsByTagName=function(t,e){return null!=t&&t.getElementsByTagName(e)},HtmlTag.SetHide=function(t){null!=t&&void 0!=t.style&&(t.style.display="none")},HtmlTag.SetShow=function(t){null!=t&&void 0!=t.style&&(t.style.display="")},HtmlTag.GetScreenWidth=function(){return window.innerWidth*(window.devicePixelRatio||1)},HtmlTag.GetScreenHeight=function(){return window.innerHeight*(window.devicePixelRatio||1)},HtmlTag.GetBodyWidth=function(){return document.body.offsetWidth},HtmlTag.GetBodyHeight=function(){return document.body.offsetHeight},HtmlTag.GetWidth=function(t){if(null!=t&&void 0!=t.style){if(""==t.style.width)return null!=t.parentNode?HtmlTag.GetWidth(t.parentNode):HtmlTag.GetBodyWidth();if(t.style.width.indexOf("%")>0){var e=HtmlTag.GetWidth(t.parentNode),i=parseFloat(t.style.width);return e*i/100}return parseFloat(t.style.width)}return void 0!=t.body?HtmlTag.GetBodyWidth():0},HtmlTag.SetWidth=function(t,e){if(null!=t&&void 0!=t.style){var i=parseFloat(e);isNaN(i)||(t.style.width=i.toString()+"px")}},HtmlTag.GetHeight=function(t){if(null!=t&&void 0!=t.style){if(""==t.style.height)return null!=t.parentNode?HtmlTag.GetHeight(t.parentNode):HtmlTag.GetBodyHeight();if(t.style.width.indexOf("%")>0){var e=HtmlTag.GetHeight(t.parentNode),i=parseFloat(t.style.height);return e*i/100}return parseFloat(t.style.height)}return void 0!=t.body?HtmlTag.GetBodyHeight():0},HtmlTag.SetHeight=function(t,e){if(null!=t&&void 0!=t.style){var i=parseFloat(e);isNaN(i)||(t.style.height=i.toString()+"px")}},HtmlTag.SetStyle=function(t,e){if(null!=t&&void 0!=t.style&&Common.IsObject(e))for(var i in e)t.style[i]=e[i]},HtmlTag.SetStyleValue=function(t,e,i){null!=t&&void 0!=t.style&&(t.style[e]=i)},HtmlTag.RemoveClass=function(t,e){
null!=t&&void 0!=t.className&&(t.className=Common.StringTrim(t.className.replace(e,"").replace("  ","")))},HtmlTag.AddClass=function(t,e){null!=t&&void 0!=t.className&&(e=Common.StringTrim(t.className)+" "+e,t.className=Common.StringTrim(e))},HtmlTag.BindEvent=function(t,e,i){HtmlTag.RemoveEvent(t,e,i),HtmlTag.AddEvent(t,e,i)},HtmlTag.AddEvent=function(t,e,i){t.attachEvent?t.attachEvent("on"+e,i):t.addEventListener?t.addEventListener(e,i,!1):t["on"+e]=i},HtmlTag.RemoveEvent=function(t,e,i){t.attachEvent?t.detachEvent("on"+e,i):t.addEventListener?t.removeEventListener(e,i,!1):t["on"+e]=null},HtmlTag.RemoveElement=function(t){"string"==typeof t&&(t=HtmlTag.GetById(t)),t&&t.parentNode&&t.parentNode.removeChild(t)},OutInterface.IsHybrid=function(){return!1},OutInterface.GetClientId=function(){var t=OutInterface.GetHead();return Common.StringIsNullOrEmpty(t.cid)?"":t.cid},OutInterface.GetVId=function(){var t=Common.GetCookie("_bfa");if(null!=t){var e=t.toString().split(".");if(e.length>2)return e[1]+"."+e[2]}return""},OutInterface.GetCity=function(t,e){function i(t){window.navigator&&window.navigator.geolocation&&window.navigator.geolocation.getCurrentPosition(function(e){null!=e&&void 0!=e.coords&&n(e.coords.longitude,e.coords.latitude,t)},function(){},{enableHighAccuracy:!0,maximumAge:5e3,timeout:2e4})}function n(t,e,i){var n={};n.Lng=t,n.Lat=e,n.Channel="Market";var o=OutInterface.GetRootUrl().replace("10245","10011")+"GetCurrentCityByLatlng";DataAccess.PostRequest(o,n,function(t){null!=t&&void 0!=t.CityId&&t.CityId>0&&Common.SetStorage("SelectCityId",t.CityId)},function(){})}function o(i,n,o){OutInterface.SelectCityId=i,o&&t&&t.call(e,i,a,n)}var a=(new Date).getTime();return void 0!=OutInterface.SelectCityId?void o(OutInterface.SelectCityId,-1,!0):(OutInterface.SelectCityId=Common.GetStorage("SelectCityId"),(!OutInterface.SelectCityId||OutInterface.SelectCityId<0)&&(OutInterface.SelectCityId=2),Common.StringIsNullOrEmpty(OutInterface.SelectCityId)?void i(!0):(o(OutInterface.SelectCityId,-1,!0),void i()))},OutInterface.GetHead=function(){var t={},e=Common.GetStorage("HEADSTORE");return t=Common.StringIsNullOrEmpty(e)?{cid:"",ctok:"",cver:"1.0",lang:"01",sid:"8888",syscode:"09",auth:null}:Common.JsonToObject(e).value,t.auth&&""!=t.auth||(t.auth=Common.GetCookie("cticket")),t.auth&&""!=t.auth||(t.auth=null),t},OutInterface.GetCINFO=function(){var t=null,e=Common.GetStorage("CINFO");return Common.StringIsNullOrEmpty(e)||(t=Common.JsonToObject(e)),t},OutInterface.GetAdWidthHeight=function(){return null},OutInterface.GetRootUrl=function(){var t="",e=window.location.host;return e.match(/localhost|fws|fat/i)?t="gateway.m.fws.qa.nt.ctripcorp.com":e.match(/uat/i)&&(t="gateway.m.uat.qa.nt.ctripcorp.com"),t=0==window.location.href.toLowerCase().indexOf("https")?"https://"+(""==t?"sec-m.ctrip.com":t):"http://"+(""==t?"m.ctrip.com":t),OutInterface.Env=t.match(/fws/)?"fat":t.match(/uat/)?"uat":"prd",t+"/restapi/soa2/10245/json/"},OutInterface.JumpUrl=function(t){window.location.href=t},OutInterface.SetUBTTrackLog=function(t,e){window.__bfi=window.__bfi||[];var i=2==t?"AdPV":3==t?"AdClick":1==t?"sumadpv":"";""!=i&&window.__bfi.push(["_tracklog",i,e])},OutInterface.TrackMetric=function(t,e,i,n,o,a){var r=(new Date).getTime()-t;if(!Common.StringIsNullOrEmpty(e)){o=o||"",a=a||"";var s={name:"adsdkelapsedtime",value:r,sample:10,tag:{PageId:e,InterfaceType:i,Status:n,SiteType:a,SiteID:o}};window.__bfi=window.__bfi||[],window.__bfi.push(["_trackMetric",s])}},window.AdSlider=AdSlider}();